{% extends 'base.html' %}
{% block title %}ูุงููุณ ุงููุตุทูุญุงุช | ููุตุฉ ุทูุจุฉ ุงูุตูุชูุฉ{% endblock %}
{% block content %}
<div class="page-head">
  <h1>ูุงููุณ ุงููุตุทูุญุงุช</h1>
  <p class="muted">ุงุจุญุซ ุนู ูุตุทูุญุงุช ุชุฎุตุตูุฉ ูู ุนูู ุงููุนูููุงุช โ ูุน ูุฑุงุกุฉ ุตูุชูุฉ ุนุจุฑ ุงููุชุตูุญ.</p>
</div>

<div class="card">
  <form method="get" class="search-row">
    <input class="input" name="q" value="{{ q }}" placeholder="ุงุจุญุซ ุนู ูุตุทูุญ...">
    <select class="input select" name="category" aria-label="ุชุตููุฉ ุญุณุจ ุงูุชุตููู">
      <option value="">ุฌููุน ุงูุชุตูููุงุช</option>
      {% for cat in categories %}
        <option value="{{ cat.pk }}" {% if selected_category == cat.pk|stringformat:"d" %}selected{% endif %}>
          {% if cat.icon %}{{ cat.icon }} {% endif %}{{ cat.name }} ({{ cat.num_terms }})
        </option>
      {% endfor %}
    </select>
    <button class="btn secondary" type="submit">ุจุญุซ</button>
    {% if q or selected_category %}
      <a class="btn outline" href="{% url 'glossary:list' %}">ุฅูุบุงุก</a>
    {% endif %}
    {% if user.is_authenticated and user.is_librarian %}
      <a class="btn primary" href="{% url 'glossary:new' %}">ุฅุถุงูุฉ ูุตุทูุญ</a>
    {% endif %}
  </form>

  {% if terms %}
    <div class="list-cards">
      {% for t in terms %}
        <a class="list-card" href="{% url 'glossary:detail' t.pk %}">
          <div class="list-title">{{ t.term }}</div>
          <div class="list-preview">{{ t.definition|truncatewords:15 }}</div>
          <div class="list-meta">
            {% if t.category %}
              <span class="term-badge">{% if t.category.icon %}{{ t.category.icon }} {% endif %}{{ t.category.name }}</span>
            {% endif %}
            <span>ุงุถุบุท ูุนุฑุถ ุงูุชุนุฑูู ูุชุดุบูู ุงููุทู ๐</span>
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">ูุง ุชูุฌุฏ ูุชุงุฆุฌ.</p>
  {% endif %}
</div>
{% endblock %}
