{% extends 'base.html' %}
{% block title %}ุงูููู ุงูุดุฎุตู | ููุตุฉ ุทูุจุฉ ุงูุตูุชูุฉ{% endblock %}

{% block content %}
<div class="page-head">
  <h1>ุงูููู ุงูุดุฎุตู</h1>
  <p class="muted">ุนุฑุถ ูุฅุฏุงุฑุฉ ูุนูููุงุช ุญุณุงุจู.</p>
</div>

<!-- Profile Header -->
<div class="profile-header card">
  <div class="profile-avatar-section">
    <div class="profile-avatar">
      {% if profile_user.avatar %}
        <img src="{{ profile_user.avatar.url }}" alt="ุตูุฑุฉ {{ profile_user.get_display_name }}">
      {% else %}
        <span class="avatar-initials">{{ profile_user.get_initials }}</span>
      {% endif %}
    </div>
    <div class="profile-info">
      <h2 class="profile-name">{{ profile_user.get_display_name }}</h2>
      <span class="badge {{ profile_user.role }}">{{ profile_user.get_role_display }}</span>
      <p class="profile-username">@{{ profile_user.username }}</p>
    </div>
  </div>
  
  <div class="profile-actions">
    <a href="{% url 'accounts:profile_edit' %}" class="btn primary">โ๏ธ ุชุนุฏูู ุงูููู ุงูุดุฎุตู</a>
    <a href="{% url 'accounts:change_password' %}" class="btn outline">๐ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</a>
  </div>
</div>

<!-- Profile Completion -->
{% if completion < 100 %}
<div class="card completion-card">
  <div class="completion-header">
    <h3>ุงูุชูุงู ุงูููู ุงูุดุฎุตู</h3>
    <span class="completion-percentage">{{ completion }}%</span>
  </div>
  <div class="progress-bar">
    <div class="progress-fill" style="width: {{ completion }}%"></div>
  </div>
  <p class="hint">ุฃููู ูููู ุงูุดุฎุตู ููุญุตูู ุนูู ุชุฌุฑุจุฉ ุฃูุถู.</p>
  <a href="{% url 'accounts:profile_edit' %}" class="btn secondary small">ุฅููุงู ุงูููู ุงูุดุฎุตู</a>
</div>
{% endif %}

<!-- Profile Details -->
<div class="profile-details">
  <div class="card">
    <h3>ุงููุนูููุงุช ุงูุดุฎุตูุฉ</h3>
    
    <div class="info-grid">
      <div class="info-item">
        <span class="info-label">ุงูุงุณู ุงููุงูู</span>
        <span class="info-value">{{ profile_user.full_name_ar|default:"ูู ููุญุฏุฏ" }}</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ุงุณู ุงููุณุชุฎุฏู</span>
        <span class="info-value">{{ profile_user.username }}</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</span>
        <span class="info-value">{{ profile_user.email|default:"ูู ููุญุฏุฏ" }}</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ุงูุฌูุณ</span>
        <span class="info-value">{{ profile_user.get_gender_display|default:"ูู ููุญุฏุฏ" }}</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ุฑูู ุงููุงุชู</span>
        <span class="info-value" dir="ltr">{{ profile_user.phone|default:"ูู ููุญุฏุฏ" }}</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ุชุงุฑูุฎ ุงููููุงุฏ</span>
        <span class="info-value">
          {% if profile_user.birth_date %}
            {{ profile_user.birth_date|date:"Y/m/d" }}
          {% else %}
            ูู ููุญุฏุฏ
          {% endif %}
        </span>
      </div>
    </div>
    
    {% if profile_user.bio %}
    <div class="info-item bio-item">
      <span class="info-label">ูุจุฐุฉ ุดุฎุตูุฉ</span>
      <p class="info-value bio-text">{{ profile_user.bio }}</p>
    </div>
    {% endif %}
  </div>
  
  <div class="card">
    <h3>ูุนูููุงุช ุงูุญุณุงุจ</h3>
    
    <div class="info-grid">
      <div class="info-item">
        <span class="info-label">ููุน ุงูุญุณุงุจ</span>
        <span class="info-value">
          <span class="badge {{ profile_user.role }}">{{ profile_user.get_role_display }}</span>
        </span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ุชุงุฑูุฎ ุงูุชุณุฌูู</span>
        <span class="info-value">{{ profile_user.date_joined|date:"Y/m/d" }}</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ุขุฎุฑ ุชุญุฏูุซ ููููู</span>
        <span class="info-value">{{ profile_user.profile_updated_at|date:"Y/m/d - H:i" }}</span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ุงุณุชูุงู ุงูุฅุดุนุงุฑุงุช</span>
        <span class="info-value">
          {% if profile_user.receive_notifications %}
            <span class="status-active">โ ููุนูู</span>
          {% else %}
            <span class="status-inactive">โ ูุนุทูู</span>
          {% endif %}
        </span>
      </div>
    </div>
  </div>
</div>

<div class="back-link">
  <a href="{% url 'service:dashboard' %}" class="btn outline">โ ุงูุนูุฏุฉ ูููุญุฉ ุงูุชุญูู</a>
</div>
{% endblock %}
