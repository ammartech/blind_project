{% extends 'base.html' %}
{% block title %}ุชุนุฏูู ุงูููู ุงูุดุฎุตู | ููุตุฉ ุทูุจุฉ ุงูุตูุชูุฉ{% endblock %}

{% block content %}
<div class="page-head">
  <nav class="breadcrumb" aria-label="ุงูุชููู">
    <a href="{% url 'accounts:profile' %}">ุงูููู ุงูุดุฎุตู</a>
    <span class="separator">โบ</span>
    <span>ุชุนุฏูู</span>
  </nav>
  <h1>ุชุนุฏูู ุงูููู ุงูุดุฎุตู</h1>
  <p class="muted">ูู ุจุชุญุฏูุซ ูุนูููุงุชู ุงูุดุฎุตูุฉ.</p>
</div>

<!-- Profile Completion Hint -->
{% if completion < 100 %}
<div class="alert info">
  <strong>๐ก ูุตูุญุฉ:</strong> ูููู ุงูุดุฎุตู ููุชูู ุจูุณุจุฉ {{ completion }}%. ุฃููู ุงููุนูููุงุช ุงููุงูุตุฉ ููุญุตูู ุนูู ุชุฌุฑุจุฉ ุฃูุถู.
</div>
{% endif %}

<div class="card">
  <form method="post" enctype="multipart/form-data" class="form">
    {% csrf_token %}
    
    {{ form.non_field_errors }}
    
    <!-- Avatar Section -->
    <div class="form-section avatar-section">
      <h3 class="section-title">ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ</h3>
      
      <div class="avatar-upload">
        <div class="current-avatar">
          {% if request.user.avatar %}
            <img src="{{ request.user.avatar.url }}" alt="ุตูุฑุชู ุงูุญุงููุฉ">
          {% else %}
            <span class="avatar-initials large">{{ request.user.get_initials }}</span>
          {% endif %}
        </div>
        <div class="avatar-input">
          {{ form.avatar }}
          <p class="field-hint">ุงุฎุชุฑ ุตูุฑุฉ ุจุตูุบุฉ JPG ุฃู PNG. ุงูุญุฏ ุงูุฃูุตู 2 ููุฌุงุจุงูุช.</p>
          {{ form.avatar.errors }}
        </div>
      </div>
    </div>
    
    <!-- Personal Info Section -->
    <div class="form-section">
      <h3 class="section-title">ุงููุนูููุงุช ุงูุดุฎุตูุฉ</h3>
      
      <div class="form-row">
        <label for="{{ form.full_name_ar.id_for_label }}">{{ form.full_name_ar.label }}</label>
        {{ form.full_name_ar }}
        {{ form.full_name_ar.errors }}
      </div>
      
      <div class="form-row">
        <label for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
        {{ form.email }}
        {{ form.email.errors }}
      </div>
      
      <div class="form-grid-2">
        <div class="form-row">
          <label for="{{ form.gender.id_for_label }}">{{ form.gender.label }}</label>
          {{ form.gender }}
          {{ form.gender.errors }}
        </div>
        
        <div class="form-row">
          <label for="{{ form.birth_date.id_for_label }}">{{ form.birth_date.label }}</label>
          {{ form.birth_date }}
          {{ form.birth_date.errors }}
        </div>
      </div>
      
      <div class="form-row">
        <label for="{{ form.phone.id_for_label }}">{{ form.phone.label }}</label>
        {{ form.phone }}
        {{ form.phone.errors }}
      </div>
      
      <div class="form-row">
        <label for="{{ form.bio.id_for_label }}">{{ form.bio.label }}</label>
        {{ form.bio }}
        {{ form.bio.errors }}
        <p class="field-hint">ุญุฏ ุฃูุตู 500 ุญุฑู.</p>
      </div>
    </div>
    
    <!-- Preferences Section -->
    <div class="form-section">
      <h3 class="section-title">ุงูุชูุถููุงุช</h3>
      
      <div class="form-row checkbox-row">
        <label class="checkbox-label">
          {{ form.receive_notifications }}
          <span>{{ form.receive_notifications.label }}</span>
        </label>
        <p class="field-hint">ุณูุฑุณู ูู ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุฑุฏ ุนูู ุงุณุชูุณุงุฑุงุชู.</p>
      </div>
    </div>
    
    <div class="form-actions">
      <button class="btn primary" type="submit">๐พ ุญูุธ ุงูุชุบููุฑุงุช</button>
      <a class="btn outline" href="{% url 'accounts:profile' %}">ุฅูุบุงุก</a>
    </div>
  </form>
</div>

<div class="card danger-zone">
  <h3>ุฅุนุฏุงุฏุงุช ุงูุฃูุงู</h3>
  <p class="muted">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุงูุฎุงุตุฉ ุจุญุณุงุจู.</p>
  <a href="{% url 'accounts:change_password' %}" class="btn danger-outline">๐ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</a>
</div>
{% endblock %}
